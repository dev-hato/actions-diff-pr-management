{"version":3,"sources":["../../src/parser/SourceCode.js"],"names":["SourceCode","constructor","text","index","contextLocations","enterContext","pairMark","push","leaveContext","findIndex","context","key","splice","isInContext","length","some","contextLocation","canRead","read","undefined","peek"],"mappings":"AAAA;AACA;;;;;;;AAEO,MAAMA,UAAN,CAAiB;AACpBC,EAAAA,WAAW,CAACC,IAAD,EAAO;AACd,SAAKA,IAAL,GAAYA,IAAZ;AACA,SAAKC,KAAL,GAAa,CAAb;AACA;;AACA,SAAKC,gBAAL,GAAwB,EAAxB;AACH;;AAEDC,EAAAA,YAAY,CAACC,QAAD,EAAW;AACnB,SAAKF,gBAAL,CAAsBG,IAAtB,CAA2B;AACvBJ,MAAAA,KAAK,EAAE,KAAKA,KAAL,GAAa,CADG;AAEvBG,MAAAA;AAFuB,KAA3B;AAIH;;AAEDE,EAAAA,YAAY,CAACF,QAAD,EAAW;AACnB,QAAMH,KAAK,GAAG,KAAKC,gBAAL,CAAsBK,SAAtB,CAAgCC,OAAO,IAAI;AACrD,aAAOA,OAAO,CAACJ,QAAR,CAAiBK,GAAjB,KAAyBL,QAAQ,CAACK,GAAzC;AACH,KAFa,CAAd;;AAGA,QAAIR,KAAK,KAAK,CAAC,CAAf,EAAkB;AACd,WAAKC,gBAAL,CAAsBQ,MAAtB,CAA6BT,KAA7B,EAAoC,CAApC;AACH;AACJ;;AAEDU,EAAAA,WAAW,CAACP,QAAD,EAAW;AAClB,QAAI,CAACA,QAAL,EAAe;AACX,aAAO,KAAKF,gBAAL,CAAsBU,MAAtB,GAA+B,CAAtC;AACH;;AACD,WAAO,KAAKV,gBAAL,CAAsBW,IAAtB,CAA2BC,eAAe,IAAIA,eAAe,CAACV,QAAhB,CAAyBK,GAAzB,KAAiCL,QAAQ,CAACK,GAAxF,CAAP;AACH;AAED;AACJ;AACA;;;AACe,MAAPM,OAAO,GAAG;AACV,WAAO,KAAKC,IAAL,OAAgBC,SAAvB;AACH;;AAEDD,EAAAA,IAAI,GAAG;AACH,WAAO,KAAKhB,IAAL,CAAU,KAAKC,KAAf,CAAP;AACH;;AAEDiB,EAAAA,IAAI,GAAY;AAAA,QAAXjB,KAAW,uEAAH,CAAG;AACZ,SAAKA,KAAL,IAAcA,KAAd;AACH;;AA5CmB","sourcesContent":["// MIT Â© 2018 azu\n\"use strict\";\n\nexport class SourceCode {\n    constructor(text) {\n        this.text = text;\n        this.index = 0;\n        /** @type {{index:number, pairMark: PairMark}}[] */\n        this.contextLocations = [];\n    }\n\n    enterContext(pairMark) {\n        this.contextLocations.push({\n            index: this.index + 1,\n            pairMark\n        });\n    }\n\n    leaveContext(pairMark) {\n        const index = this.contextLocations.findIndex(context => {\n            return context.pairMark.key === pairMark.key;\n        });\n        if (index !== -1) {\n            this.contextLocations.splice(index, 1);\n        }\n    }\n\n    isInContext(pairMark) {\n        if (!pairMark) {\n            return this.contextLocations.length > 0;\n        }\n        return this.contextLocations.some(contextLocation => contextLocation.pairMark.key === pairMark.key);\n    }\n\n    /**\n     * Return true, no more read char\n     */\n    get canRead() {\n        return this.read() !== undefined;\n    }\n\n    read() {\n        return this.text[this.index];\n    }\n\n    peek(index = 1) {\n        this.index += index;\n    }\n}\n"],"file":"SourceCode.js"}