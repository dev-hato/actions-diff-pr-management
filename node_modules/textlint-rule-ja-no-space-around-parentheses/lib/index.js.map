{"version":3,"sources":["../src/index.js"],"names":["brackets","leftBrackets","map","bracket","RegExp","rightBrackets","reporter","context","Syntax","RuleError","report","fixer","getSource","helper","RuleHelper","Str","node","isPlainStrNode","text","forEach","pattern","match","index","fix","replaceTextRange","module","exports","linter"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;;AACA;;AACA;;AAEA,IAAMA,QAAQ,GAAG,CACb,KADa,EACN,KADM,EACC,GADD,EACM,GADN,EACW,GADX,EACgB,GADhB,EACqB,GADrB,EAC0B,GAD1B,EAC+B,GAD/B,EACoC,GADpC,CAAjB;AAIA,IAAMC,YAAY,GAAGD,QAAQ,CAACE,GAAT,CAAaC,OAAO,IAAI;AACzC,SAAO,IAAIC,MAAJ,CAAW,aAAaD,OAAxB,EAAiC,GAAjC,CAAP;AACH,CAFoB,CAArB;AAGA,IAAME,aAAa,GAAGL,QAAQ,CAACE,GAAT,CAAaC,OAAO,IAAI;AAC1C,SAAO,IAAIC,MAAJ,CAAWD,OAAO,GAAG,SAArB,EAAgC,GAAhC,CAAP;AACH,CAFqB,CAAtB;;AAGA,SAASG,QAAT,CAAkBC,OAAlB,EAA2B;AACvB,MAAM;AAACC,IAAAA,MAAD;AAASC,IAAAA,SAAT;AAAoBC,IAAAA,MAApB;AAA4BC,IAAAA,KAA5B;AAAmCC,IAAAA;AAAnC,MAAgDL,OAAtD;AACA,MAAMM,MAAM,GAAG,IAAIC,8BAAJ,EAAf;AACA,SAAO;AACH,KAACN,MAAM,CAACO,GAAR,EAAaC,IAAb,EAAkB;AACd,UAAI,CAACH,MAAM,CAACI,cAAP,CAAsBD,IAAtB,CAAL,EAAkC;AAC9B;AACH;;AACD,UAAME,IAAI,GAAGN,SAAS,CAACI,IAAD,CAAtB,CAJc,CAKd;;AACAf,MAAAA,YAAY,CAACkB,OAAb,CAAqBC,OAAO,IAAI;AAC5B,8CAAqBF,IAArB,EAA2BE,OAA3B,EAAoCD,OAApC,CAA4CE,KAAK,IAAI;AACjD,cAAM;AAACC,YAAAA;AAAD,cAAUD,KAAhB;AACAX,UAAAA,MAAM,CAACM,IAAD,EAAO,IAAIP,SAAJ,CAAc,yBAAd,EAAyC;AAClDa,YAAAA,KAAK,EAAEA,KAD2C;AAElDC,YAAAA,GAAG,EAAEZ,KAAK,CAACa,gBAAN,CAAuB,CAACF,KAAD,EAAQA,KAAK,GAAG,CAAhB,CAAvB,EAA2C,EAA3C;AAF6C,WAAzC,CAAP,CAAN;AAIH,SAND;AAOH,OARD,EANc,CAed;;AACAjB,MAAAA,aAAa,CAACc,OAAd,CAAsBC,OAAO,IAAI;AAC7B,8CAAqBF,IAArB,EAA2BE,OAA3B,EAAoCD,OAApC,CAA4CE,KAAK,IAAI;AACjD,cAAM;AAACC,YAAAA,KAAD;AAAQJ,YAAAA;AAAR,cAAgBG,KAAtB;AACAX,UAAAA,MAAM,CAACM,IAAD,EAAO,IAAIP,SAAJ,CAAc,yBAAd,EAAyC;AAClDa,YAAAA,KAAK,EAAEA,KAD2C;AAElDC,YAAAA,GAAG,EAAEZ,KAAK,CAACa,gBAAN,CAAuB,CAACF,KAAD,EAAQA,KAAK,GAAG,CAAhB,CAAvB,EAA2C,EAA3C;AAF6C,WAAzC,CAAP,CAAN;AAIH,SAND;AAOH,OARD;AASH;;AA1BE,GAAP;AA4BH;;AACDG,MAAM,CAACC,OAAP,GAAiB;AACbC,EAAAA,MAAM,EAAErB,QADK;AAEbK,EAAAA,KAAK,EAAEL;AAFM,CAAjB","sourcesContent":["// LICENSE : MIT\n\"use strict\";\n/*\n かっこ類と隣接する文字の間のスペースの有無\n かっこの外側、内側ともにスペースを入れません。\n */\nimport {RuleHelper} from \"textlint-rule-helper\";\nimport {matchCaptureGroupAll} from \"match-index\";\n\nconst brackets = [\n    \"\\\\[\", \"\\\\]\", \"（\", \"）\", \"［\", \"］\", \"「\", \"」\", \"『\", \"』\"\n];\n\nconst leftBrackets = brackets.map(bracket => {\n    return new RegExp(\"\\([ 　]\\)\" + bracket, \"g\");\n});\nconst rightBrackets = brackets.map(bracket => {\n    return new RegExp(bracket + \"\\([ 　])\", \"g\");\n});\nfunction reporter(context) {\n    const {Syntax, RuleError, report, fixer, getSource} = context;\n    const helper = new RuleHelper();\n    return {\n        [Syntax.Str](node){\n            if (!helper.isPlainStrNode(node)) {\n                return;\n            }\n            const text = getSource(node);\n            // 左にスペース\n            leftBrackets.forEach(pattern => {\n                matchCaptureGroupAll(text, pattern).forEach(match => {\n                    const {index} = match;\n                    report(node, new RuleError(\"かっこの外側、内側ともにスペースを入れません。\", {\n                        index: index,\n                        fix: fixer.replaceTextRange([index, index + 1], \"\")\n                    }));\n                });\n            });\n            // 右にスペース\n            rightBrackets.forEach(pattern => {\n                matchCaptureGroupAll(text, pattern).forEach(match => {\n                    const {index, text} = match;\n                    report(node, new RuleError(\"かっこの外側、内側ともにスペースを入れません。\", {\n                        index: index,\n                        fix: fixer.replaceTextRange([index, index + 1], \"\")\n                    }));\n                });\n            });\n        }\n    };\n}\nmodule.exports = {\n    linter: reporter,\n    fixer: reporter\n};\n"],"file":"index.js"}