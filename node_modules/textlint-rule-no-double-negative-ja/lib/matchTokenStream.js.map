{"version":3,"sources":["../src/matchTokenStream.js"],"names":["matchToken","token","expectShape","Array","isArray","some","singleExpectShape","Object","keys","every","key","actualValue","expectedValues","expectedValue","expectTokenStream","tokenStream","currentTokenPosition","tokenCount","length","expectedToken"],"mappings":"AAAA;AACA;AAEA;;;;;;;;;;;;;;;AASA,SAASA,UAAT,CAAoBC,KAApB,EAA2BC,WAA3B,EAAwC;AACpC,MAAIC,KAAK,CAACC,OAAN,CAAcF,WAAd,CAAJ,EAAgC;AAC5B,WAAOA,WAAW,CAACG,IAAZ,CAAiBC,iBAAiB,IAAIN,UAAU,CAACC,KAAD,EAAQK,iBAAR,CAAhD,CAAP;AACH;;AACD,SAAOC,MAAM,CAACC,IAAP,CAAYN,WAAZ,EAAyBO,KAAzB,CAA+BC,GAAG,IAAI;AACzC,QAAMC,WAAW,GAAGV,KAAK,CAACS,GAAD,CAAzB,CADyC,CAEzC;;AACA,QAAME,cAAc,GAAGT,KAAK,CAACC,OAAN,CAAcF,WAAW,CAACQ,GAAD,CAAzB,IAAkCR,WAAW,CAACQ,GAAD,CAA7C,GAAqD,CAACR,WAAW,CAACQ,GAAD,CAAZ,CAA5E;AACA,WAAOE,cAAc,CAACP,IAAf,CAAoBQ,aAAa,IAAI;AACxC,aAAOF,WAAW,KAAKE,aAAvB;AACH,KAFM,CAAP;AAGH,GAPM,CAAP;AAQH;;AAEc,SAASC,iBAAT,CAA2BC,WAA3B,EAAwC;AACnD,MAAIC,oBAAoB,GAAG,CAA3B;AACA,MAAMC,UAAU,GAAGF,WAAW,CAACG,MAA/B;AACA,SAAQjB,KAAD,IAAW;AACd,QAAMkB,aAAa,GAAGJ,WAAW,CAACC,oBAAD,CAAjC;;AACA,QAAIhB,UAAU,CAACC,KAAD,EAAQkB,aAAR,CAAd,EAAsC;AAClCH,MAAAA,oBAAoB,IAAI,CAAxB;AACH,KAFD,MAEO;AACH;AACAA,MAAAA,oBAAoB,GAAG,CAAvB;AACH,KAPa,CAQd;;;AACA,QAAIA,oBAAoB,KAAKC,UAA7B,EAAyC;AACrC;AACAD,MAAAA,oBAAoB,GAAG,CAAvB;AACA,aAAO,IAAP;AACH;;AACD,WAAO,KAAP;AACH,GAfD;AAgBH","sourcesContent":["// LICENSE : MIT\n\"use strict\";\n\n/**\n * expectShape\n * [expectShape | expectShape]\n * にどれかにマッチするならtrueを返す\n * @param {*} token\n * @param {*|*[]} expectShape\n *  orでマッチしたい場合は配列を渡す\n * @returns {boolean}\n */\nfunction matchToken(token, expectShape) {\n    if (Array.isArray(expectShape)) {\n        return expectShape.some(singleExpectShape => matchToken(token, singleExpectShape));\n    }\n    return Object.keys(expectShape).every(key => {\n        const actualValue = token[key];\n        // 値は複数の場合もある\n        const expectedValues = Array.isArray(expectShape[key]) ? expectShape[key] : [expectShape[key]];\n        return expectedValues.some(expectedValue => {\n            return actualValue === expectedValue;\n        });\n    })\n}\n\nexport default function expectTokenStream(tokenStream) {\n    let currentTokenPosition = 0;\n    const tokenCount = tokenStream.length;\n    return (token) => {\n        const expectedToken = tokenStream[currentTokenPosition];\n        if (matchToken(token, expectedToken)) {\n            currentTokenPosition += 1;\n        } else {\n            // restart\n            currentTokenPosition = 0;\n        }\n        // match\n        if (currentTokenPosition === tokenCount) {\n            // match -> reset\n            currentTokenPosition = 0;\n            return true;\n        }\n        return false;\n    }\n}\n"],"file":"matchTokenStream.js"}