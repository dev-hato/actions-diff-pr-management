{"version":3,"sources":["../src/index.js"],"names":["rx","japaneseRegExp","reporter","context","Syntax","RuleError","report","fixer","getSource","helper","RuleHelper","Str","node","isPlainStrNode","text","matchReg","katakakana","forEach","match","input","captureGroups","test","captureGroup","index","fix","replaceTextRange","module","exports","linter"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;;AACA;;AACA;;;;;;;;AACA,IAAMA,EAAE,GAAG,mBAAK,GAAL,CAAX;AACA,IAAMC,cAAc,GAAG,0FAAvB;;AAEA,SAASC,QAAT,CAAkBC,OAAlB,EAA2B;AACvB,MAAM;AAACC,IAAAA,MAAD;AAASC,IAAAA,SAAT;AAAoBC,IAAAA,MAApB;AAA4BC,IAAAA,KAA5B;AAAmCC,IAAAA;AAAnC,MAAgDL,OAAtD;AACA,MAAMM,MAAM,GAAG,IAAIC,8BAAJ,EAAf;AACA,SAAO;AACH,KAACN,MAAM,CAACO,GAAR,EAAaC,IAAb,EAAkB;AACd,UAAI,CAACH,MAAM,CAACI,cAAP,CAAsBD,IAAtB,CAAL,EAAkC;AAC9B;AACH;;AACD,UAAME,IAAI,GAAGN,SAAS,CAACI,IAAD,CAAtB,CAJc,CAKd;;AACA,UAAMG,QAAQ,GAAGf,EAAH,iFAAQC,cAAR,EAA4BA,cAA5B,CAAd;AACA,UAAMe,UAAU,GAAG,eAAnB;AACA,gCAASF,IAAT,EAAeC,QAAf,EAAyBE,OAAzB,CAAiCC,KAAK,IAAI;AACtC,YAAM;AAACC,UAAAA,KAAD;AAAQC,UAAAA;AAAR,YAAyBF,KAA/B,CADsC,CAEtC;;AACA,YAAIF,UAAU,CAACK,IAAX,CAAgBF,KAAhB,CAAJ,EAA4B;AACxB;AACH;;AACDC,QAAAA,aAAa,CAACH,OAAd,CAAsBK,YAAY,IAAI;AAClC,cAAMC,KAAK,GAAGD,YAAY,CAACC,KAA3B;AACAjB,UAAAA,MAAM,CAACM,IAAD,EAAO,IAAIP,SAAJ,CAAc,6BAAd,EAA6C;AACtDkB,YAAAA,KAAK,EAAEA,KAD+C;AAEtDC,YAAAA,GAAG,EAAEjB,KAAK,CAACkB,gBAAN,CAAuB,CAACF,KAAD,EAAQA,KAAK,GAAG,CAAhB,CAAvB,EAA2C,EAA3C;AAFiD,WAA7C,CAAP,CAAN;AAIH,SAND;AAOH,OAbD;AAcH;;AAvBE,GAAP;AAyBH;;AACDG,MAAM,CAACC,OAAP,GAAiB;AACbC,EAAAA,MAAM,EAAE1B,QADK;AAEbK,EAAAA,KAAK,EAAEL;AAFM,CAAjB","sourcesContent":["// LICENSE : MIT\n\"use strict\";\n/*\n 全角文字と半角文字の間\n 全角文字どうしの間にスペースを入れません。\n ただしカタカナ複合語の場合を除きます。\n */\nimport {RuleHelper} from \"textlint-rule-helper\";\nimport {matchAll} from \"match-index\";\nimport regx from \"regx\";\nconst rx = regx(\"g\");\nconst japaneseRegExp = /(?:[々〇〻\\u3400-\\u4DBF\\u4E00-\\u9FFF\\uF900-\\uFAFF]|[\\uD840-\\uD87F][\\uDC00-\\uDFFF]|[ぁ-んァ-ヶ])/;\n\nfunction reporter(context) {\n    const {Syntax, RuleError, report, fixer, getSource} = context;\n    const helper = new RuleHelper();\n    return {\n        [Syntax.Str](node){\n            if (!helper.isPlainStrNode(node)) {\n                return;\n            }\n            const text = getSource(node);\n            // 全角同士の間は半角スペースを入れない\n            const matchReg = rx`${japaneseRegExp}( )${japaneseRegExp}`;\n            const katakakana = /[ァ-ヶ]( )[ァ-ヶ]/;\n            matchAll(text, matchReg).forEach(match => {\n                const {input, captureGroups} = match;\n                // ただしカタカナ複合語の場合を除きます。\n                if (katakakana.test(input)) {\n                    return;\n                }\n                captureGroups.forEach(captureGroup => {\n                    const index = captureGroup.index;\n                    report(node, new RuleError(\"原則として、全角文字どうしの間にスペースを入れません。\", {\n                        index: index,\n                        fix: fixer.replaceTextRange([index, index + 1], \"\")\n                    }));\n                });\n            });\n        }\n    };\n}\nmodule.exports = {\n    linter: reporter,\n    fixer: reporter\n};\n"],"file":"index.js"}