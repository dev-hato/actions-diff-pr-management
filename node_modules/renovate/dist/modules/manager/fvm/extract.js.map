{"version":3,"file":"extract.js","sourceRoot":"","sources":["../../../../lib/modules/manager/fvm/extract.ts"],"names":[],"mappings":";;;;AAAA,kEAAkC;AAClC,4CAAyC;AACzC,sEAA4E;AAO5E,SAAgB,kBAAkB,CAChC,OAAe,EACf,WAAmB;IAEnB,IAAI,SAAoB,CAAC;IACzB,IAAI;QACF,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;KACjC;IAAC,OAAO,GAAG,EAAE;QACZ,eAAM,CAAC,KAAK,CAAC,EAAE,WAAW,EAAE,GAAG,EAAE,EAAE,oBAAoB,CAAC,CAAC;QACzD,OAAO,IAAI,CAAC;KACb;IAED,IAAI,CAAC,SAAS,CAAC,iBAAiB,EAAE;QAChC,eAAM,CAAC,KAAK,CACV,EAAE,QAAQ,EAAE,SAAS,EAAE,EACvB,sDAAsD,CACvD,CAAC;QACF,OAAO,IAAI,CAAC;KACb;SAAM,IAAI,CAAC,YAAE,CAAC,MAAM,CAAC,SAAS,CAAC,iBAAiB,CAAC,EAAE;QAClD,eAAM,CAAC,KAAK,CAAC,EAAE,QAAQ,EAAE,SAAS,EAAE,EAAE,oCAAoC,CAAC,CAAC;QAC5E,OAAO,IAAI,CAAC;KACb;IAED,MAAM,GAAG,GAAsB;QAC7B,OAAO,EAAE,SAAS;QAClB,YAAY,EAAE,SAAS,CAAC,iBAAiB;QACzC,UAAU,EAAE,0CAAwB,CAAC,EAAE;QACvC,WAAW,EAAE,iBAAiB;KAC/B,CAAC;IACF,OAAO,EAAE,IAAI,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC;AACzB,CAAC;AA9BD,gDA8BC","sourcesContent":["import is from '@sindresorhus/is';\nimport { logger } from '../../../logger';\nimport { FlutterVersionDatasource } from '../../datasource/flutter-version';\nimport type { PackageDependency, PackageFile } from '../types';\n\ninterface FvmConfig {\n  flutterSdkVersion: string;\n}\n\nexport function extractPackageFile(\n  content: string,\n  packageFile: string\n): PackageFile | null {\n  let fvmConfig: FvmConfig;\n  try {\n    fvmConfig = JSON.parse(content);\n  } catch (err) {\n    logger.debug({ packageFile, err }, 'Invalid FVM config');\n    return null;\n  }\n\n  if (!fvmConfig.flutterSdkVersion) {\n    logger.debug(\n      { contents: fvmConfig },\n      'FVM config does not have flutterSdkVersion specified'\n    );\n    return null;\n  } else if (!is.string(fvmConfig.flutterSdkVersion)) {\n    logger.debug({ contents: fvmConfig }, 'flutterSdkVersion must be a string');\n    return null;\n  }\n\n  const dep: PackageDependency = {\n    depName: 'flutter',\n    currentValue: fvmConfig.flutterSdkVersion,\n    datasource: FlutterVersionDatasource.id,\n    packageName: 'flutter/flutter',\n  };\n  return { deps: [dep] };\n}\n"]}