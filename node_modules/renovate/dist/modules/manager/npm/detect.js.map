{"version":3,"file":"detect.js","sourceRoot":"","sources":["../../../../lib/modules/manager/npm/detect.ts"],"names":[],"mappings":";;;;AAAA,oDAAoB;AACpB,kEAAkC;AAClC,0DAA0B;AAC1B,4CAAyC;AACzC,yCAAkD;AAG3C,KAAK,UAAU,kBAAkB;IACtC,MAAM,GAAG,GAAwB,EAAE,CAAC;IACpC,MAAM,OAAO,GAAG,YAAE,CAAC,OAAO,EAAE,CAAC;IAC7B,MAAM,aAAa,GAAG,eAAK,CAAC,IAAI,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;IACpD,IAAI;QACF,MAAM,KAAK,GAAG,MAAM,IAAA,mBAAc,EAAC,aAAa,EAAE,MAAM,CAAC,CAAC;QAC1D,IAAI,YAAE,CAAC,cAAc,CAAC,KAAK,CAAC,EAAE;YAC5B,GAAG,CAAC,KAAK,GAAG,KAAK,CAAC;YAClB,GAAG,CAAC,UAAU,GAAG,IAAI,CAAC;YACtB,eAAM,CAAC,KAAK,CAAC,YAAY,aAAa,iCAAiC,CAAC,CAAC;SAC1E;KACF;IAAC,OAAO,GAAG,EAAE;QACZ,eAAM,CAAC,IAAI,CAAC,EAAE,aAAa,EAAE,EAAE,2BAA2B,CAAC,CAAC;KAC7D;IACD,OAAO,GAAG,CAAC;AACb,CAAC;AAfD,gDAeC","sourcesContent":["import os from 'os';\nimport is from '@sindresorhus/is';\nimport upath from 'upath';\nimport { logger } from '../../../logger';\nimport { readSystemFile } from '../../../util/fs';\nimport type { GlobalManagerConfig } from '../types';\n\nexport async function detectGlobalConfig(): Promise<GlobalManagerConfig> {\n  const res: GlobalManagerConfig = {};\n  const homedir = os.homedir();\n  const npmrcFileName = upath.join(homedir, '.npmrc');\n  try {\n    const npmrc = await readSystemFile(npmrcFileName, 'utf8');\n    if (is.nonEmptyString(npmrc)) {\n      res.npmrc = npmrc;\n      res.npmrcMerge = true;\n      logger.debug(`Detected ${npmrcFileName} and adding it to global config`);\n    }\n  } catch (err) {\n    logger.warn({ npmrcFileName }, 'Error reading .npmrc file');\n  }\n  return res;\n}\n"]}