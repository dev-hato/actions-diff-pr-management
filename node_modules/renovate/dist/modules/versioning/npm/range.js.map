{"version":3,"file":"range.js","sourceRoot":"","sources":["../../../../lib/modules/versioning/npm/range.ts"],"names":[],"mappings":";;;;AAAA,kEAAkC;AAClC,4DAA4B;AAC5B,wEAAuC;AACvC,4CAAyC;AACzC,+CAA4C;AAG5C,MAAM,EACJ,GAAG,EAAE,SAAS,EACd,KAAK,EAAE,SAAS,EAChB,KAAK,EACL,KAAK,EACL,KAAK,EACL,UAAU,EACV,SAAS,GACV,GAAG,gBAAM,CAAC;AAEX,SAAS,iBAAiB,CAAC,QAAgB,EAAE,QAAgB;IAC3D,MAAM,cAAc,GAAG,KAAK,CAAC,QAAQ,CAAC,CAAC;IACvC,MAAM,cAAc,GAAG,KAAK,CAAC,QAAQ,CAAC,CAAC;IACvC,MAAM,cAAc,GAAG,KAAK,CAAC,QAAQ,CAAC,CAAC;IAEvC,MAAM,YAAY,GAAG,KAAK,CAAC,QAAQ,CAAC,CAAC;IACrC,MAAM,YAAY,GAAG,KAAK,CAAC,QAAQ,CAAC,CAAC;IACrC,MAAM,YAAY,GAAG,KAAK,CAAC,QAAQ,CAAC,CAAC;IAErC,MAAM,QAAQ,GAAG,CAAC,YAAY,EAAE,YAAY,EAAE,YAAY,CAAC,CAAC;IAC5D,MAAM,QAAQ,GAAG,CAAC,cAAc,EAAE,cAAc,EAAE,cAAc,CAAC,CAAC;IAClE,MAAM,WAAW,GAAG,EAAE,CAAC;IAEvB,IAAI,WAAW,GAAG,IAAI,CAAC;IACvB,IAAI,WAAW,GAAG,KAAK,CAAC;IACxB,KAAK,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE;QACnC,MAAM,MAAM,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC;QAC7B,MAAM,MAAM,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC;QAE7B,IAAI,YAAY,GAAG,KAAK,CAAC;QACzB,IAAI,MAAM,KAAK,CAAC,IAAI,MAAM,KAAK,CAAC,EAAE;YAChC,IAAI,WAAW,EAAE;gBACf,WAAW,GAAG,KAAK,CAAC;gBACpB,YAAY,GAAG,IAAI,CAAC;aACrB;SACF;QAED,IAAI,YAAY,IAAI,MAAM,GAAG,MAAM,EAAE;YACnC,WAAW,GAAG,IAAI,CAAC;SACpB;QAED,IAAI,CAAC,WAAW,IAAI,MAAM,GAAG,MAAM,EAAE;YACnC,OAAO,QAAQ,CAAC;SACjB;QAED,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;KAC7C;IAED,OAAO,WAAW,CAAC,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC;AACxD,CAAC;AAED,cAAc;AACd,SAAgB,WAAW,CAAC,EAC1B,YAAY,EACZ,aAAa,EACb,cAAc,EACd,UAAU,GACK;IACf,IAAI,aAAa,KAAK,KAAK,IAAI,SAAS,CAAC,YAAY,CAAC,EAAE;QACtD,OAAO,UAAU,CAAC;KACnB;IACD,IAAI,aAAa,KAAK,iBAAiB,EAAE;QACvC,IAAI,SAAS,CAAC,UAAU,EAAE,YAAY,CAAC,EAAE;YACvC,OAAO,YAAY,CAAC;SACrB;QACD,OAAO,WAAW,CAAC;YACjB,YAAY;YACZ,aAAa,EAAE,SAAS;YACxB,cAAc;YACd,UAAU;SACX,CAAC,CAAC;KACJ;IACD,MAAM,WAAW,GAAG,sBAAW,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC;IACzD,MAAM,OAAO,GAAG,WAAW,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;IACpD,IAAI,aAAa,KAAK,OAAO,EAAE;QAC7B,IAAI,SAAS,CAAC,UAAU,EAAE,YAAY,CAAC,EAAE;YACvC,OAAO,YAAY,CAAC;SACrB;QACD,MAAM,QAAQ,GAAG,WAAW,CAAC;YAC3B,YAAY;YACZ,aAAa,EAAE,SAAS;YACxB,cAAc;YACd,UAAU;SACX,CAAC,CAAC;QACH,IAAI,OAAO,CAAC,QAAQ,EAAE,UAAU,CAAC,GAAG,CAAC,EAAE;YACrC,gBAAgB;YAChB,MAAM,YAAY,GAAG,YAAY,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;YAC1D,YAAY,CAAC,GAAG,EAAE,CAAC;YACnB,sBAAsB;YACtB,OAAO,GAAG,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,QAAS,EAAE,CAAC;SAC7D;QACD,IAAI,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE;YAC1B,MAAM,eAAe,GAAG,WAAW,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;YAC5D,IAAI,eAAe,CAAC,QAAQ,KAAK,GAAG,EAAE;gBACpC,MAAM,YAAY,GAAG,YAAY,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;gBAC7C,YAAY,CAAC,GAAG,EAAE,CAAC;gBACnB,sBAAsB;gBACtB,OAAO,GAAG,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,QAAS,EAAE,CAAC;aAClD;YACD,IAAI,OAAO,CAAC,QAAQ,EAAE,UAAU,CAAC,GAAG,CAAC,EAAE;gBACrC,eAAM,CAAC,IAAI,CAAC,yDAAyD,CAAC,CAAC;gBACvE,OAAO,IAAI,CAAC;aACb;SACF;QACD,sBAAsB;QACtB,OAAO,GAAG,YAAY,OAAO,QAAS,EAAE,CAAC;KAC1C;IACD,MAAM,cAAc,GAAG,KAAK,CAAC,UAAU,CAAC,CAAC;IACzC,MAAM,cAAc,GAAG,KAAK,CAAC,UAAU,CAAC,CAAC;IACzC,MAAM,cAAc,GAAG,KAAK,CAAC,UAAU,CAAC,CAAC;IACzC,MAAM,YAAY,GAAG,UAAU,CAAC,UAAU,CAAC,CAAC;IAC5C,MAAM,MAAM,GAAG,YAAY,CAAC,CAAC,CAAC,IAAI,YAAY,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;IACzD,eAAe;IACf,IAAI,aAAa,KAAK,MAAM,EAAE;QAC5B,IAAI,WAAW,CAAC,MAAM,KAAK,CAAC,EAAE;YAC5B,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE;gBACrB,OAAO,WAAW,CAAC;oBACjB,YAAY;oBACZ,aAAa,EAAE,SAAS;oBACxB,cAAc;oBACd,UAAU;iBACX,CAAC,CAAC;aACJ;YACD,IAAI,OAAO,CAAC,QAAQ,KAAK,GAAG,EAAE;gBAC5B,MAAM,KAAK,GAAG,YAAY,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;gBACtC,IAAI,MAAM,CAAC,MAAM,EAAE;oBACjB,OAAO,IAAI,UAAU,EAAE,CAAC;iBACzB;gBACD,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE;oBACtB,KAAK;oBACL,OAAO,IAAI,cAAc,EAAE,CAAC;iBAC7B;gBACD,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE;oBACtB,OAAO;oBACP,OAAO,IAAI,cAAc,IAAI,cAAc,EAAE,CAAC;iBAC/C;gBACD,OAAO,IAAI,UAAU,EAAE,CAAC;aACzB;YACD,IAAI,OAAO,CAAC,QAAQ,KAAK,GAAG,EAAE;gBAC5B,MAAM,KAAK,GAAG,YAAY,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;gBACtC,IAAI,MAAM,CAAC,MAAM,EAAE;oBACjB,OAAO,IAAI,UAAU,EAAE,CAAC;iBACzB;gBACD,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE;oBACtB,KAAK;oBACL,OAAO,IAAI,cAAc,EAAE,CAAC;iBAC7B;gBACD,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE;oBACtB,OAAO;oBACP,OAAO,IAAI,cAAc,IAAI,cAAc,EAAE,CAAC;iBAC/C;gBACD,OAAO,IAAI,UAAU,EAAE,CAAC;aACzB;YACD,IAAI,OAAO,CAAC,QAAQ,KAAK,GAAG,EAAE;gBAC5B,OAAO,IAAI,UAAU,EAAE,CAAC;aACzB;YACD,IAAI,OAAO,CAAC,QAAQ,KAAK,IAAI,EAAE;gBAC7B,OAAO,YAAY,CAAC,QAAQ,CAAC,KAAK,CAAC;oBACjC,CAAC,CAAC,MAAM,UAAU,EAAE;oBACpB,CAAC,CAAC,KAAK,UAAU,EAAE,CAAC;aACvB;YACD,IAAI,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE;gBACpC,OAAO,YAAY,CAAC;aACrB;SACF;aAAM;YACL,OAAO,sBAAW;iBACf,UAAU,CAAC,YAAY,CAAC;iBACxB,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC;iBACpB,MAAM,CAAC,YAAE,CAAC,MAAM,CAAC;iBACjB,GAAG,CAAC,CAAC,QAAQ,EAAE,EAAE;gBAChB,MAAM,cAAc,GAAG,WAAW,CAAC;oBACjC,YAAY,EAAE,QAAQ;oBACtB,aAAa,EAAE,MAAM;oBACrB,cAAc;oBACd,UAAU;iBACX,CAAC,CAAC;gBACH,IAAI,cAAc,IAAI,SAAS,CAAC,UAAU,EAAE,cAAc,CAAC,EAAE;oBAC3D,OAAO,cAAc,CAAC;iBACvB;gBAED,OAAO,WAAW,CAAC;oBACjB,YAAY,EAAE,QAAQ;oBACtB,aAAa,EAAE,SAAS;oBACxB,cAAc;oBACd,UAAU;iBACX,CAAC,CAAC;YACL,CAAC,CAAC;iBACD,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC;iBACrC,IAAI,CAAC,GAAG,CAAC,CAAC;SACd;QACD,eAAM,CAAC,KAAK,CACV,iDAAiD,GAAG,YAAY,CACjE,CAAC;QACF,OAAO,IAAI,CAAC;KACb;IACD,IAAI,OAAO,CAAC,QAAQ,KAAK,IAAI,EAAE;QAC7B,OAAO,MAAM,cAAc,IAAI,cAAc,IAAI,CAAC;KACnD;IACD,IAAI,OAAO,CAAC,QAAQ,KAAK,GAAG,EAAE;QAC5B,IAAI,MAAM,CAAC,MAAM,IAAI,CAAC,cAAc,EAAE;YACpC,OAAO,IAAI,cAAc,IAAI,cAAc,IAAI,cAAc,GAAG,MAAM,EAAE,CAAC;SAC1E;QACD,OAAO,IAAI,iBAAiB,CAAC,cAAc,EAAE,UAAU,CAAC,EAAE,CAAC;KAC5D;IACD,IAAI,OAAO,CAAC,QAAQ,KAAK,GAAG,EAAE;QAC5B,OAAO,IAAI,UAAU,EAAE,CAAC;KACzB;IACD,IAAI,OAAO,CAAC,QAAQ,KAAK,GAAG,EAAE;QAC5B,IAAI,MAAM,CAAC,MAAM,EAAE;YACjB,OAAO,IAAI,cAAc,IAAI,cAAc,IAAI,cAAc,GAAG,MAAM,EAAE,CAAC;SAC1E;QACD,OAAO,IAAI,cAAc,IAAI,cAAc,IAAI,CAAC;KACjD;IACD,IAAI,OAAO,CAAC,QAAQ,KAAK,IAAI,EAAE;QAC7B,IAAI,GAAG,CAAC;QACR,IAAI,OAAO,CAAC,KAAK,IAAI,MAAM,CAAC,MAAM,EAAE;YAClC,GAAG,GAAG,KAAK,UAAU,EAAE,CAAC;SACzB;aAAM,IAAI,OAAO,CAAC,KAAK,EAAE;YACxB,GAAG,GAAG,KAAK,cAAc,IAAI,cAAc,EAAE,CAAC;SAC/C;aAAM;YACL,GAAG,GAAG,KAAK,cAAc,EAAE,CAAC;SAC7B;QACD,IAAI,YAAY,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE;YAChC,GAAG,GAAG,GAAG,CAAC,OAAO,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;SAChC;QACD,OAAO,GAAG,CAAC;KACZ;IACD,IAAI,OAAO,CAAC,QAAQ,KAAK,GAAG,EAAE;QAC5B,IAAI,GAAG,CAAC;QACR,IAAI,YAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE;YACjC,MAAM,QAAQ,GAAG,cAAc,GAAG,CAAC,CAAC;YACpC,GAAG,GAAG,IAAI,QAAQ,MAAM,CAAC;SAC1B;aAAM,IAAI,OAAO,CAAC,KAAK,EAAE;YACxB,sBAAsB;YACtB,GAAG,GAAG,IAAI,SAAS,CAAC,UAAU,EAAE,OAAO,CAAE,EAAE,CAAC;SAC7C;aAAM,IAAI,OAAO,CAAC,KAAK,EAAE;YACxB,GAAG,GAAG,IAAI,cAAc,IAAI,cAAc,GAAG,CAAC,EAAE,CAAC;SAClD;aAAM;YACL,GAAG,GAAG,IAAI,cAAc,GAAG,CAAC,EAAE,CAAC;SAChC;QACD,IAAI,YAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;YAC/B,GAAG,GAAG,GAAG,CAAC,OAAO,CAAC,IAAA,aAAK,EAAC,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC;SACtC;QACD,OAAO,GAAG,CAAC;KACZ;IACD,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE;QACrB,IAAI,OAAO,CAAC,KAAK,EAAE;YACjB,IAAI,OAAO,CAAC,KAAK,KAAK,GAAG,EAAE;gBACzB,OAAO,GAAG,cAAc,IAAI,CAAC;aAC9B;YACD,IAAI,OAAO,CAAC,KAAK,KAAK,GAAG,EAAE;gBACzB,OAAO,GAAG,cAAc,IAAI,CAAC;aAC9B;YACD,IAAI,OAAO,CAAC,KAAK,KAAK,GAAG,EAAE;gBACzB,OAAO,GAAG,cAAc,IAAI,cAAc,IAAI,CAAC;aAChD;YACD,IAAI,OAAO,CAAC,KAAK,KAAK,GAAG,EAAE;gBACzB,OAAO,GAAG,cAAc,IAAI,cAAc,IAAI,CAAC;aAChD;YACD,OAAO,GAAG,cAAc,IAAI,cAAc,EAAE,CAAC;SAC9C;QACD,OAAO,GAAG,cAAc,EAAE,CAAC;KAC5B;IACD,OAAO,UAAU,CAAC;AACpB,CAAC;AApND,kCAoNC","sourcesContent":["import is from '@sindresorhus/is';\nimport semver from 'semver';\nimport semverUtils from 'semver-utils';\nimport { logger } from '../../../logger';\nimport { regEx } from '../../../util/regex';\nimport type { NewValueConfig } from '../types';\n\nconst {\n  inc: increment,\n  valid: isVersion,\n  major,\n  minor,\n  patch,\n  prerelease,\n  satisfies,\n} = semver;\n\nfunction replaceCaretValue(oldValue: string, newValue: string): string {\n  const toVersionMajor = major(newValue);\n  const toVersionMinor = minor(newValue);\n  const toVersionPatch = patch(newValue);\n\n  const currentMajor = major(oldValue);\n  const currentMinor = minor(oldValue);\n  const currentPatch = patch(oldValue);\n\n  const oldTuple = [currentMajor, currentMinor, currentPatch];\n  const newTuple = [toVersionMajor, toVersionMinor, toVersionPatch];\n  const resultTuple = [];\n\n  let leadingZero = true;\n  let needReplace = false;\n  for (let idx = 0; idx < 3; idx += 1) {\n    const oldVal = oldTuple[idx];\n    const newVal = newTuple[idx];\n\n    let leadingDigit = false;\n    if (oldVal !== 0 || newVal !== 0) {\n      if (leadingZero) {\n        leadingZero = false;\n        leadingDigit = true;\n      }\n    }\n\n    if (leadingDigit && newVal > oldVal) {\n      needReplace = true;\n    }\n\n    if (!needReplace && newVal < oldVal) {\n      return newValue;\n    }\n\n    resultTuple.push(leadingDigit ? newVal : 0);\n  }\n\n  return needReplace ? resultTuple.join('.') : oldValue;\n}\n\n// TODO: #7154\nexport function getNewValue({\n  currentValue,\n  rangeStrategy,\n  currentVersion,\n  newVersion,\n}: NewValueConfig): string | null {\n  if (rangeStrategy === 'pin' || isVersion(currentValue)) {\n    return newVersion;\n  }\n  if (rangeStrategy === 'update-lockfile') {\n    if (satisfies(newVersion, currentValue)) {\n      return currentValue;\n    }\n    return getNewValue({\n      currentValue,\n      rangeStrategy: 'replace',\n      currentVersion,\n      newVersion,\n    });\n  }\n  const parsedRange = semverUtils.parseRange(currentValue);\n  const element = parsedRange[parsedRange.length - 1];\n  if (rangeStrategy === 'widen') {\n    if (satisfies(newVersion, currentValue)) {\n      return currentValue;\n    }\n    const newValue = getNewValue({\n      currentValue,\n      rangeStrategy: 'replace',\n      currentVersion,\n      newVersion,\n    });\n    if (element.operator?.startsWith('<')) {\n      // TODO fix this\n      const splitCurrent = currentValue.split(element.operator);\n      splitCurrent.pop();\n      // TODO: types (#7154)\n      return `${splitCurrent.join(element.operator)}${newValue!}`;\n    }\n    if (parsedRange.length > 1) {\n      const previousElement = parsedRange[parsedRange.length - 2];\n      if (previousElement.operator === '-') {\n        const splitCurrent = currentValue.split('-');\n        splitCurrent.pop();\n        // TODO: types (#7154)\n        return `${splitCurrent.join('-')}- ${newValue!}`;\n      }\n      if (element.operator?.startsWith('>')) {\n        logger.warn(`Complex ranges ending in greater than are not supported`);\n        return null;\n      }\n    }\n    // TODO: types (#7154)\n    return `${currentValue} || ${newValue!}`;\n  }\n  const toVersionMajor = major(newVersion);\n  const toVersionMinor = minor(newVersion);\n  const toVersionPatch = patch(newVersion);\n  const toNewVersion = prerelease(newVersion);\n  const suffix = toNewVersion ? `-${toNewVersion[0]}` : '';\n  // Simple range\n  if (rangeStrategy === 'bump') {\n    if (parsedRange.length === 1) {\n      if (!element.operator) {\n        return getNewValue({\n          currentValue,\n          rangeStrategy: 'replace',\n          currentVersion,\n          newVersion,\n        });\n      }\n      if (element.operator === '^') {\n        const split = currentValue.split('.');\n        if (suffix.length) {\n          return `^${newVersion}`;\n        }\n        if (split.length === 1) {\n          // ^4\n          return `^${toVersionMajor}`;\n        }\n        if (split.length === 2) {\n          // ^4.1\n          return `^${toVersionMajor}.${toVersionMinor}`;\n        }\n        return `^${newVersion}`;\n      }\n      if (element.operator === '~') {\n        const split = currentValue.split('.');\n        if (suffix.length) {\n          return `~${newVersion}`;\n        }\n        if (split.length === 1) {\n          // ~4\n          return `~${toVersionMajor}`;\n        }\n        if (split.length === 2) {\n          // ~4.1\n          return `~${toVersionMajor}.${toVersionMinor}`;\n        }\n        return `~${newVersion}`;\n      }\n      if (element.operator === '=') {\n        return `=${newVersion}`;\n      }\n      if (element.operator === '>=') {\n        return currentValue.includes('>= ')\n          ? `>= ${newVersion}`\n          : `>=${newVersion}`;\n      }\n      if (element.operator.startsWith('<')) {\n        return currentValue;\n      }\n    } else {\n      return semverUtils\n        .parseRange(currentValue)\n        .map((x) => x.semver)\n        .filter(is.string)\n        .map((subRange) => {\n          const bumpedSubRange = getNewValue({\n            currentValue: subRange,\n            rangeStrategy: 'bump',\n            currentVersion,\n            newVersion,\n          });\n          if (bumpedSubRange && satisfies(newVersion, bumpedSubRange)) {\n            return bumpedSubRange;\n          }\n\n          return getNewValue({\n            currentValue: subRange,\n            rangeStrategy: 'replace',\n            currentVersion,\n            newVersion,\n          });\n        })\n        .filter((x) => x !== null && x !== '')\n        .join(' ');\n    }\n    logger.debug(\n      'Unsupported range type for rangeStrategy=bump: ' + currentValue\n    );\n    return null;\n  }\n  if (element.operator === '~>') {\n    return `~> ${toVersionMajor}.${toVersionMinor}.0`;\n  }\n  if (element.operator === '^') {\n    if (suffix.length || !currentVersion) {\n      return `^${toVersionMajor}.${toVersionMinor}.${toVersionPatch}${suffix}`;\n    }\n    return `^${replaceCaretValue(currentVersion, newVersion)}`;\n  }\n  if (element.operator === '=') {\n    return `=${newVersion}`;\n  }\n  if (element.operator === '~') {\n    if (suffix.length) {\n      return `~${toVersionMajor}.${toVersionMinor}.${toVersionPatch}${suffix}`;\n    }\n    return `~${toVersionMajor}.${toVersionMinor}.0`;\n  }\n  if (element.operator === '<=') {\n    let res;\n    if (element.patch || suffix.length) {\n      res = `<=${newVersion}`;\n    } else if (element.minor) {\n      res = `<=${toVersionMajor}.${toVersionMinor}`;\n    } else {\n      res = `<=${toVersionMajor}`;\n    }\n    if (currentValue.includes('<= ')) {\n      res = res.replace('<=', '<= ');\n    }\n    return res;\n  }\n  if (element.operator === '<') {\n    let res;\n    if (currentValue.endsWith('.0.0')) {\n      const newMajor = toVersionMajor + 1;\n      res = `<${newMajor}.0.0`;\n    } else if (element.patch) {\n      // TODO: types (#7154)\n      res = `<${increment(newVersion, 'patch')!}`;\n    } else if (element.minor) {\n      res = `<${toVersionMajor}.${toVersionMinor + 1}`;\n    } else {\n      res = `<${toVersionMajor + 1}`;\n    }\n    if (currentValue.includes('< ')) {\n      res = res.replace(regEx(/</g), '< ');\n    }\n    return res;\n  }\n  if (!element.operator) {\n    if (element.minor) {\n      if (element.minor === 'x') {\n        return `${toVersionMajor}.x`;\n      }\n      if (element.minor === '*') {\n        return `${toVersionMajor}.*`;\n      }\n      if (element.patch === 'x') {\n        return `${toVersionMajor}.${toVersionMinor}.x`;\n      }\n      if (element.patch === '*') {\n        return `${toVersionMajor}.${toVersionMinor}.*`;\n      }\n      return `${toVersionMajor}.${toVersionMinor}`;\n    }\n    return `${toVersionMajor}`;\n  }\n  return newVersion;\n}\n"]}