{"version":3,"file":"util.js","sourceRoot":"","sources":["../../../../lib/modules/datasource/sbt-package/util.ts"],"names":[],"mappings":";;;AAAA,+CAA4C;AAC5C,4DAAyD;AAEzD,MAAM,UAAU,GAAG,kCAAkC,CAAC;AAEtD,SAAgB,aAAa,CAC3B,OAAe,EACf,WAAW,CAAC,CAAS,EAAW,EAAE,CAAC,CAAC,IAAA,aAAK,EAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;IAEzD,MAAM,UAAU,GAAG,OAAO,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;IACnD,OAAO,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;AACrC,CAAC;AAND,sCAMC;AAED,SAAgB,yBAAyB,CACvC,OAAe,EACf,OAAqB;IAErB,MAAM,gBAAgB,GAAG,IAAI,GAAG,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC,CAAC,QAAQ,CAAC;IAC9D,OAAO,OAAO,CAAC,OAAO,CAAC,UAAU,EAAE,CAAC,IAAY,EAAE,EAAE,CAClD,IAAI,CAAC,OAAO,CAAC,gBAAgB,EAAE,EAAE,CAAC,CACnC,CAAC;AACJ,CAAC;AARD,8DAQC;AAED,SAAgB,gBAAgB,CAAC,QAAyB;IACxD,IAAI,QAAQ,EAAE,MAAM,EAAE;QACpB,OAAO,QAAQ,CAAC,MAAM,CAAC,CAAC,aAAa,EAAE,OAAO,EAAE,EAAE,CAChD,IAAA,iBAAO,EAAC,OAAO,EAAE,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,aAAa,CAChE,CAAC;KACH;IACD,OAAO,IAAI,CAAC;AACd,CAAC;AAPD,4CAOC","sourcesContent":["import { regEx } from '../../../util/regex';\nimport { compare } from '../../versioning/maven/compare';\n\nconst linkRegExp = /(?<=href=['\"])[^'\"]*(?=\\/['\"])/gi;\n\nexport function parseIndexDir(\n  content: string,\n  filterFn = (x: string): boolean => !regEx(/^\\.+/).test(x)\n): string[] {\n  const unfiltered = content.match(linkRegExp) ?? [];\n  return unfiltered.filter(filterFn);\n}\n\nexport function normalizeRootRelativeUrls(\n  content: string,\n  rootUrl: string | URL\n): string {\n  const rootRelativePath = new URL(rootUrl.toString()).pathname;\n  return content.replace(linkRegExp, (href: string) =>\n    href.replace(rootRelativePath, '')\n  );\n}\n\nexport function getLatestVersion(versions: string[] | null): string | null {\n  if (versions?.length) {\n    return versions.reduce((latestVersion, version) =>\n      compare(version, latestVersion) === 1 ? version : latestVersion\n    );\n  }\n  return null;\n}\n"]}