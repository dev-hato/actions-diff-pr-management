{"version":3,"file":"common.js","sourceRoot":"","sources":["../../../../lib/modules/platform/github/common.ts"],"names":[],"mappings":";;;;AAAA,kEAAkC;AAClC,0CAAyC;AACzC,wCAA6C;AAI7C;;GAEG;AACH,SAAgB,YAAY,CAAC,EAA+B;IAC1D,IAAI,CAAC,EAAE,EAAE;QACP,OAAO,IAAI,CAAC;KACb;IAED,MAAM,UAAU,GAAG,EAAE,CAAC,UAAU,IAAI,IAAA,yBAAe,EAAC,EAAE,CAAC,IAAI,CAAC,CAAC;IAC7D,MAAM,MAAM,GAAO;QACjB,aAAa,EAAE,iBAAiB,EAAE,CAAC,MAAM,EAAE;QAC3C,MAAM,EAAE,EAAE,CAAC,MAAM;QACjB,YAAY,EAAE,EAAE,CAAC,IAAI,EAAE,GAAG;QAC1B,KAAK,EAAE,EAAE,CAAC,KAAK;QACf,KAAK,EACH,EAAE,CAAC,KAAK,KAAK,eAAO,CAAC,MAAM,IAAI,YAAE,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,CAAC;YACpD,CAAC,CAAC,eAAO,CAAC,MAAM;YAChB,CAAC,CAAC,EAAE,CAAC,KAAK;QACd,UAAU;KACX,CAAC;IAEF,IAAI,EAAE,CAAC,IAAI,EAAE,GAAG,EAAE;QAChB,MAAM,CAAC,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC;KAC1B;IAED,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE;QAC5B,MAAM,CAAC,UAAU,GAAG,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC;KAC5C;IAED,IAAI,EAAE,CAAC,MAAM,EAAE;QACb,MAAM,CAAC,MAAM,GAAG,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,EAAE,EAAE,EAAE,CAAC,IAAI,CAAC,CAAC;KACnD;IAED,IAAI,EAAE,CAAC,QAAQ,IAAI,YAAE,CAAC,aAAa,CAAC,EAAE,CAAC,SAAS,CAAC,EAAE;QACjD,MAAM,CAAC,YAAY,GAAG,IAAI,CAAC;KAC5B;IAED,IAAI,EAAE,CAAC,mBAAmB,EAAE;QAC1B,MAAM,CAAC,YAAY,GAAG,IAAI,CAAC;KAC5B;IAED,IAAI,EAAE,CAAC,UAAU,EAAE;QACjB,MAAM,CAAC,SAAS,GAAG,EAAE,CAAC,UAAU,CAAC;KAClC;IAED,IAAI,EAAE,CAAC,SAAS,EAAE;QAChB,MAAM,CAAC,QAAQ,GAAG,EAAE,CAAC,SAAS,CAAC;KAChC;IAED,OAAO,MAAM,CAAC;AAChB,CAAC;AA/CD,oCA+CC","sourcesContent":["import is from '@sindresorhus/is';\nimport { PrState } from '../../../types';\nimport { getPrBodyStruct } from '../pr-body';\nimport type { Pr } from '../types';\nimport type { GhRestPr } from './types';\n\n/**\n * @see https://docs.github.com/en/rest/reference/pulls#list-pull-requests\n */\nexport function coerceRestPr(pr: GhRestPr | null | undefined): Pr | null {\n  if (!pr) {\n    return null;\n  }\n\n  const bodyStruct = pr.bodyStruct ?? getPrBodyStruct(pr.body);\n  const result: Pr = {\n    displayNumber: `Pull Request #${pr.number}`,\n    number: pr.number,\n    sourceBranch: pr.head?.ref,\n    title: pr.title,\n    state:\n      pr.state === PrState.Closed && is.string(pr.merged_at)\n        ? PrState.Merged\n        : pr.state,\n    bodyStruct,\n  };\n\n  if (pr.head?.sha) {\n    result.sha = pr.head.sha;\n  }\n\n  if (pr.head?.repo?.full_name) {\n    result.sourceRepo = pr.head.repo.full_name;\n  }\n\n  if (pr.labels) {\n    result.labels = pr.labels.map(({ name }) => name);\n  }\n\n  if (pr.assignee || is.nonEmptyArray(pr.assignees)) {\n    result.hasAssignees = true;\n  }\n\n  if (pr.requested_reviewers) {\n    result.hasReviewers = true;\n  }\n\n  if (pr.created_at) {\n    result.createdAt = pr.created_at;\n  }\n\n  if (pr.closed_at) {\n    result.closedAt = pr.closed_at;\n  }\n\n  return result;\n}\n"]}