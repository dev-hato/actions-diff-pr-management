{"version":3,"file":"managers.js","sourceRoot":"","sources":["../../../lib/config/validation-helpers/managers.ts"],"names":[],"mappings":";;;AAAA,mDAAuD;AAIvD;;GAEG;AACH,SAAgB,KAAK,CAAC,EACpB,YAAY,EACZ,WAAW,GACM;IACjB,IAAI,kBAAsC,CAAC;IAC3C,IAAI,KAAK,CAAC,OAAO,CAAC,YAAY,CAAC,aAAa,CAAC,EAAE;QAC7C,IACE,YAAY,CAAC,aAAa,CAAC,IAAI,CAC7B,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC,IAAA,wBAAc,GAAE,CAAC,QAAQ,CAAC,WAAW,CAAC,CACzD,EACD;YACA,kBAAkB,GAAG,GAAG,WAAW;iFACwC,MAAM,CAC7E,YAAY,CAAC,aAAa,CAC3B;mCAC0B,IAAA,wBAAc,GAAE,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;SAC9D;KACF;SAAM,IAAI,OAAO,YAAY,CAAC,aAAa,KAAK,WAAW,EAAE;QAC5D,kBAAkB,GAAG,GAAG,WAAW,wDAAwD,OAAO,YAAY,CAAC,aAAa,GAAG,CAAC;KACjI;IAED,OAAO,kBAAkB;QACvB,CAAC,CAAC;YACE;gBACE,KAAK,EAAE,qBAAqB;gBAC5B,OAAO,EAAE,kBAAkB;aAC5B;SACF;QACH,CAAC,CAAC,EAAE,CAAC;AACT,CAAC;AA7BD,sBA6BC","sourcesContent":["import { getManagerList } from '../../modules/manager';\nimport type { ValidationMessage } from '../types';\nimport type { CheckManagerArgs } from './types';\n\n/**\n * Only if type condition or context condition violated then errors array will be mutated to store metadata\n */\nexport function check({\n  resolvedRule,\n  currentPath,\n}: CheckManagerArgs): ValidationMessage[] {\n  let managersErrMessage: string | undefined;\n  if (Array.isArray(resolvedRule.matchManagers)) {\n    if (\n      resolvedRule.matchManagers.find(\n        (confManager) => !getManagerList().includes(confManager)\n      )\n    ) {\n      managersErrMessage = `${currentPath}:\n        You have included an unsupported manager in a package rule. Your list: ${String(\n          resolvedRule.matchManagers\n        )}.\n        Supported managers are: (${getManagerList().join(', ')}).`;\n    }\n  } else if (typeof resolvedRule.matchManagers !== 'undefined') {\n    managersErrMessage = `${currentPath}: Managers should be type of List. You have included ${typeof resolvedRule.matchManagers}.`;\n  }\n\n  return managersErrMessage\n    ? [\n        {\n          topic: 'Configuration Error',\n          message: managersErrMessage,\n        },\n      ]\n    : [];\n}\n"]}