{"version":3,"file":"index.js","sourceRoot":"","sources":["../../lib/config/index.ts"],"names":[],"mappings":";;;;AAAA,sCAAmC;AACnC,gDAA0E;AAC1E,2DAAqC;AAOrC,mCAA2C;AAElC,iGAFA,wBAAgB,OAEA;AAEzB,SAAgB,gBAAgB,CAC9B,MAAsB,EACtB,OAAe;IAEf,IAAI,aAAa,GAAkB;QACjC,GAAG,MAAM;QACT,QAAQ,EAAE,IAAI;QACd,OAAO;KACR,CAAC;IACF,MAAM,QAAQ,GAAG,IAAA,aAAG,EAAC,OAAO,EAAE,UAAU,CAAC,CAAC;IAC1C,IAAI,QAAQ,EAAE;QACZ,wBAAwB;QACxB,aAAa,GAAG,IAAA,wBAAgB,EAAC,aAAa,EAAE,MAAM,CAAC,QAAQ,CAAQ,CAAC,CAAC;QACzE,aAAa,CAAC,QAAQ,GAAG,QAAQ,CAAC;KACnC;IACD,wBAAwB;IACxB,aAAa,GAAG,IAAA,wBAAgB,EAAC,aAAa,EAAE,MAAM,CAAC,OAAO,CAAQ,CAAC,CAAC;IACxE,KAAK,MAAM,CAAC,IAAI,IAAA,yBAAe,GAAE,CAAC,MAAM,CAAC,IAAA,wBAAc,GAAE,CAAC,EAAE;QAC1D,OAAO,aAAa,CAAC,CAAC,CAAC,CAAC;KACzB;IACD,OAAO,aAAa,CAAC;AACvB,CAAC;AArBD,4CAqBC;AAED,SAAgB,YAAY,CAC1B,WAAsB,EACtB,WAAgC;IAEhC,eAAM,CAAC,KAAK,CAAC,EAAE,MAAM,EAAE,WAAW,EAAE,EAAE,iBAAiB,WAAW,IAAI,CAAC,CAAC;IACxE,MAAM,YAAY,GAAmB,EAAE,GAAG,WAAW,EAAE,CAAC;IACxD,MAAM,MAAM,GAA2B;QACrC,QAAQ;QACR,YAAY;QACZ,SAAS;QACT,QAAQ;QACR,IAAI;KACL,CAAC;IACF,MAAM,WAAW,GAAG,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;IAChD,KAAK,MAAM,MAAM,IAAI,OAAO,CAAC,UAAU,EAAE,EAAE;QACzC,MAAM,WAAW,GAAG,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QACjD,IAAI,WAAW,KAAK,CAAC,CAAC,IAAI,WAAW,GAAG,WAAW,EAAE;YACnD,OAAO,YAAY,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;SAClC;KACF;IACD,OAAO,YAAY,CAAC;AACtB,CAAC;AArBD,oCAqBC","sourcesContent":["import { logger } from '../logger';\nimport { get, getLanguageList, getManagerList } from '../modules/manager';\nimport * as options from './options';\nimport type {\n  AllConfig,\n  ManagerConfig,\n  RenovateConfig,\n  RenovateConfigStage,\n} from './types';\nimport { mergeChildConfig } from './utils';\n\nexport { mergeChildConfig };\n\nexport function getManagerConfig(\n  config: RenovateConfig,\n  manager: string\n): ManagerConfig {\n  let managerConfig: ManagerConfig = {\n    ...config,\n    language: null,\n    manager,\n  };\n  const language = get(manager, 'language');\n  if (language) {\n    // TODO: fix types #7154\n    managerConfig = mergeChildConfig(managerConfig, config[language] as any);\n    managerConfig.language = language;\n  }\n  // TODO: fix types #7154\n  managerConfig = mergeChildConfig(managerConfig, config[manager] as any);\n  for (const i of getLanguageList().concat(getManagerList())) {\n    delete managerConfig[i];\n  }\n  return managerConfig;\n}\n\nexport function filterConfig(\n  inputConfig: AllConfig,\n  targetStage: RenovateConfigStage\n): AllConfig {\n  logger.trace({ config: inputConfig }, `filterConfig('${targetStage}')`);\n  const outputConfig: RenovateConfig = { ...inputConfig };\n  const stages: (string | undefined)[] = [\n    'global',\n    'repository',\n    'package',\n    'branch',\n    'pr',\n  ];\n  const targetIndex = stages.indexOf(targetStage);\n  for (const option of options.getOptions()) {\n    const optionIndex = stages.indexOf(option.stage);\n    if (optionIndex !== -1 && optionIndex < targetIndex) {\n      delete outputConfig[option.name];\n    }\n  }\n  return outputConfig;\n}\n"]}